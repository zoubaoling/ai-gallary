<!--首页-->
<scroll-view 
  class="home-container"
  scroll-y="true"
  bindscrolltolower="onLoadMore"
  lower-threshold="100"
>
  <!-- 图片网格 -->
  <view class="artwork-grid">
    <view 
      class="artwork-item" 
      wx:for="{{artworks}}" 
      wx:key="id"
      bindtap="onArtworkTap"
      data-artwork="{{item}}"
    >
      <!-- 图片区域 -->
      <view class="image-container">
        <t-image
          class="artwork-image"
          src="{{item.imageUrl}}"
          mode="aspectFill"
          loading="lazy"
          error="图片加载失败"
          bind:error="onImageError"
        />
      </view>
      
      <!-- 提示词区域 -->
      <view class="prompt-section" wx:if="{{item.prompt}}">
        <text class="prompt-text">{{item.prompt}}</text>
      </view>
      
      <!-- 用户信息区域 -->
      <view class="user-info">
        <view class="avatar-container">
          <t-avatar 
            class="user-avatar"
            size="small"
            shape="circle"
            image="{{item.author.avatar || '/assets/icons/user-avatar.png'}}"
            bind:error="onAvatarError"
          />
        </view>
        <text class="user-nickname">{{item.author.nickname}}</text>
      </view>
    </view>
  </view>

  <!-- 加载更多 -->
  <view class="load-more" wx:if="{{loading}}">
    <t-loading theme="circular" size="40rpx" />
    <text class="load-text">加载更多...</text>
  </view>

  <!-- 没有更多数据 -->
  <view class="no-more" wx:if="{{!hasMore && artworks.length > 0}}">
    <text>没有更多作品了</text>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{artworks.length === 0 && !loading}}">
    <t-image
      class="empty-image"
      src="/assets/images/empty.png"
      mode="aspectFit"
    />
    <text class="empty-text">暂无作品，快来创作第一幅吧！</text>
    <t-button 
      class="create-btn"
      theme="primary"
      size="medium"
      bind:tap="onCreateTap"
    >
      开始创作
    </t-button>
  </view>
</scroll-view>

<!-- 悬浮创建按钮 -->
<t-button 
  class="floating-create-btn"
  theme="primary"
  shape="circle"
  size="large"
  icon="add"
  bind:tap="onCreateTap"
/>

<!-- Toast提示 -->
<t-toast id="t-toast" />
